# <center>南工骁鹰RM2022嵌入式组考核-B部分
本试题B部分共分为四个小任务，每个任务根据具体完成情况进行打分，总分70分。考核时间为3个小时，建议先易后难，建议先易后难，争取多拿一点分数。

## 试题内容
### 任务五：
自行选用一个按键作为SET按键，选用一个LED作为指示灯。定义一个ID，开机复位时默认为1。
* 正常工作状态下，指示灯每隔一秒闪N次（N为ID的值）
* 正常工作状态下，按一下SET按键，进入设置ID模式，此时指示灯熄灭。
   * 在设置ID模式下，短按SET键的次数（不超过8）即为设置的ID号。
   * 每次有效的短按，指示灯闪烁一次。
   * 若3秒未对SET按键进行操作，自动保存当前设置的ID号，并进入正常工作状态。

### 任务六：
请在以下两个任务中选择一个完成
#### 6-1
实现红外遥控器信号解码。使用开发板中配套的红外遥控器，需查看原理图查询管脚，自由选择信号解码方式，将解析到的红外遥控器数据通过串口1发送到上位机，或实现遥控器控制数码管的显示内容。具体的红外遥控信号协议见附件。
#### 6-2
要求使用板载的RS485模块实现RS485串口通信。RS485是一种半双工的串行总线，不能同时收发，实际工作时需要进行流控。板载RS485芯片是SP3485，请通过RE/DE引脚进行流控。
我们会提供一个TTL串口转接RS485模块，该模块集成了自动的硬件流控，可以将普通TTL串口直接转换成RS485。
本任务中所有RS485相关串口请设定为波特率115200，起始位1位，停止位1位，数据位8位，无奇偶校验。
完成以下子任务：
1.	通过串口2控制板载RS485，串口3连接外置485模块，二者进行单向的RS485 通信。按下某个按键，串口2向串口3发送一字节数据，串口3收到后通过数码管显示收到的数据或者通过串口1发送至上位机。（5分）
2.	通过串口2控制板载RS485，串口3连接外置485模块，二者进行双向的RS485 通信。按下一个按键，串口2向串口3发送一个字节的数据，串口3收到后数码管亮；按下第二个按键，串口3向串口2发送一个字节的数据，串口2收到后蜂鸣器发出声音；按下第三个按键，两个串口同时向另一个串口发送数据，串口3收到后数码管亮，串口2收到后蜂鸣器发出声音。请确保使用RE/DE引脚实现软件流控。（15分）
3.	请设计一种数据格式满足以下要求，并编程实现：
a)	每次发送8个字节的有效数据；
b)	RS485总线上有多个设备时，能够区分各种设备（即确定目标设备）；
c)	当发送过程中，有且仅有一个二进制位出现错误时，可以发现这个错误。需给出该协议的说明文档并自行解释为什么这样编码可以识别错误。提示：可使用校验和、CRC等，不要求处理错误和纠错，只需识别到出错即可。（10分）


*注意：每个任务可使用单独一工程实现 ，也可以所有功能都在一个工程里实现。*

### 任务七
填空题，直接在横线上作答即可。提示：可以查看硬件基础视频
1. CAN总线的终端电阻大小是________欧姆
2. RM中常见的CAN终端电阻的位置有______或______或______
3. 小陀螺时有一个电机能使云台不随底盘一起旋转的电机，它的电源应接在裁判系统的___________接口上
4. 步兵硬件框图中将整个图分为两个部分的线代表的硬件是______
5. 绕线管的作用是______

## 评分表
|任务|得分项|满分|得分|
|  ----  | ----  | --- | - |
|任务五|能通过闪动表示ID|10分|
|     |能进入通过按键设定ID|10分|
|     |多次设置ID，设置范围外ID后仍能正常工作|10分|
|任务六 若选择6-1|实现红外遥控器信号解码| 20分 |
| |实现遥控器控制数码管|10分
|任务六 若选择6-2|子任务1 单向485通信|5分
||子任务2 软件流控通信|15分
||子任务3 设计数据格式|10分
|任务七|每题2分|10分|
